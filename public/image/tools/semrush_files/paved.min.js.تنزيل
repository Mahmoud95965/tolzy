"use strict";!function(){var paved=window.paved=window.paved||{};paved.createBookingModal=function(configs){var state={siteId:window.siteId?window.siteId:null};var modalConfigs={iframeId:configs&&configs.iframeId?configs.iframeId:"__paved_booking_modal__",modalUrl:configs&&configs.modalUrl?configs.modalUrl:"https://www.pvdbkr.com",urlParam:configs&&configs.urlParam?configs.urlParam:"sponsor",urlToRedirect:configs&&configs.urlToRedirect?configs.urlToRedirect:"https://paved.com/booker/"+state.siteId};if(document.getElementById("sponsor-link")){document.getElementById("sponsor-link").href="#"+configs.urlParam}function openModal(){if(!state.siteId){return}if(document.getElementById(modalConfigs.iframeId)){return}redirectMobileToMarketplace();var iframe=document.createElement("iframe");iframe.setAttribute("id",modalConfigs.iframeId);iframe.setAttribute("src",modalConfigs.modalUrl+"/booking/"+state.siteId+"?cl="+btoa(window.location.href));iframe.setAttribute("style","outline: none; border: none; width: 100%; height: 100%; position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: 2147483647;");document.body.appendChild(iframe);window.addEventListener("resize",redirectMobileToMarketplace,false);window.addEventListener("message",handleMessage,false)}function maybeOpenModal(){if(window.location.hash.match(modalConfigs.urlParam)){openModal()}}function closeModal(){var iframe=document.getElementById(modalConfigs.iframeId);if(!iframe){return}document.body.removeChild(iframe);// Remove #sponsor from URL, so the modal will be reopenable
if(window.history.pushState){window.history.pushState("","/",window.location.pathname)}else{window.location.hash=""}window.removeEventListener("message",handleMessage,false);window.removeEventListener("resize",handleMessage,false)}function handleMessage(event){if(event.origin!==modalConfigs.modalUrl){return}if(event.data&&event.data.type==="CLOSE"){closeModal()}}function redirectMobileToMarketplace(){if(window.innerWidth<=799){if("false"==="true"){window.location.assign("https://standalone-booker-demo.paved.com/")}else{window.location.assign(modalConfigs.urlToRedirect)}return}}paved.openModal=openModal;paved.closeModal=closeModal;return maybeOpenModal(),window.addEventListener("hashchange",maybeOpenModal,false),{open:openModal,close:closeModal}};paved.launchModal=!function(){var modalConfigs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{urlParam:"sponsor"};paved.createBookingModal(modalConfigs)}()}();
